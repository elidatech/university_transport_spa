<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>University Transport Booking System</title>
<style>
/* Embedded Modern University Theme */
:root{
  --primary:#003366;
  --accent:#e6f0ff;
  --bg:#f4f7fb;
  --muted:#6b7280;
}
*{box-sizing:border-box}
body {
    font-family: Arial, sans-serif;
    background: var(--bg);
    margin: 0;
    padding: 0;
    color: #0f1724;
}

/* NAVBAR */
.header {
  background: var(--primary);
  color: white;
  padding: 12px 20px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.brand{
  display:flex;
  gap:12px;
  align-items:center;
}
.brand h1{
  font-size:18px;
  margin:0;
  letter-spacing:0.2px;
}
.header .navlinks{
  display:flex;
  gap:12px;
  align-items:center;
}
.header .navlinks a{
  color:white;
  text-decoration:none;
  font-weight:600;
  padding:6px 10px;
  border-radius:6px;
}
.header .navlinks a.active,
.header .navlinks a:hover{
  background: rgba(255,255,255,0.08);
}

/* Layout */
.container {
  display:flex;
  min-height:calc(100vh - 56px);
}

/* SIDEBAR */
.sidebar {
    width: 220px;
    background: #ffffff;
    position: sticky;
    top: 0;
    height: calc(100vh - 56px);
    box-shadow: 2px 0px 8px rgba(0,0,0,0.06);
    padding-top: 18px;
}
.sidebar a {
    display: block;
    padding: 12px 20px;
    text-decoration: none;
    color: var(--primary);
    font-weight: 600;
}
.sidebar a.active, .sidebar a:hover {
    background: var(--accent);
    border-left: 4px solid var(--primary);
}

/* Main area */
.main {
    flex:1;
    padding: 24px;
}

/* Topbar inside main */
.topbar {
    background: white;
    padding: 18px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-radius:10px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    margin-bottom:20px;
}
.logout-btn {
    background: #cc0000;
    padding: 8px 14px;
    color: white;
    border-radius: 6px;
    text-decoration: none;
    font-weight:600;
}

/* Cards */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
    gap: 18px;
    margin-top: 12px;
}
.card {
    background: white;
    padding: 18px;
    border-radius: 10px;
    text-decoration: none;
    color: var(--primary);
    box-shadow: 0 2px 10px rgba(0,0,0,0.06);
    display:flex;
    flex-direction:column;
    gap:8px;
}
.card h3{margin:0;font-size:16px}
.card p{margin:0;color:var(--muted)}

/* Table */
.styled-table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 10px rgba(0,0,0,0.06);
}
.styled-table thead th {
    background: var(--primary);
    color: white;
    padding: 12px;
    text-align:left;
}
.styled-table td {
    padding: 12px;
    border-bottom: 1px solid #f1f5f9;
}

/* List */
.list-box {
    list-style:none;
    padding:0;
    margin:0;
}
.list-box li {
    background: white;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    display:flex;
    justify-content:space-between;
    align-items:center;
}

/* Utilities */
.hidden{display:none}
.small {font-size:13px;color:var(--muted)}
.searchbar {
    display:flex;
    gap:8px;
}
.input {
    padding:10px;
    border-radius:8px;
    border:1px solid #e6eef9;
    width:100%;
}

/* Responsive */
@media (max-width:800px){
  .sidebar{display:none}
  .header .navlinks{display:none}
  .topbar{flex-direction:column;gap:8px;align-items:flex-start}
}
</style>
</head>
<body>

<div class="header">
  <div class="brand">
    <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden="true"><rect width="24" height="24" rx="4" fill="white" opacity="0.06"/><path d="M4 12h16" stroke="white" stroke-width="1.5" stroke-linecap="round"/></svg>
    <h1>University Transport Booking System</h1>
  </div>
  <div class="navlinks" role="navigation" aria-label="Primary">
    <a href="#" data-link="dashboard" class="active">Dashboard</a>
    <a href="#" data-link="routes">Routes</a>
    <a href="#" data-link="bookings">Bookings</a>
  </div>
</div>

<div class="container">
  <aside class="sidebar" aria-label="Sidebar">
    <a href="#" data-link="dashboard" class="active">Home</a>
    <a href="#" data-link="routes">Manage Routes</a>
    <a href="#" data-link="bookings">Bookings</a>
  </aside>

  <main class="main">
    <!-- Dashboard Section -->
    <section id="dashboard" class="view">
      <div class="topbar">
        <div>
          <h2 style="margin:0">Dashboard</h2>
          <div class="small">Overview of system activity</div>
        </div>
        <a class="logout-btn" href="#" id="goIndex">Logout</a>
      </div>

      <div class="card-grid">
        <a class="card" href="#" data-link="routes">
          <h3>Routes</h3>
          <p>View and manage available university routes</p>
        </a>
        <a class="card" href="#" data-link="bookings">
          <h3>Bookings</h3>
          <p>View current bookings and booking history</p>
        </a>
      </div>
    </section>

    <!-- Routes Section -->
    <section id="routes" class="view hidden">
      <div class="topbar">
        <div>
          <h2 style="margin:0">Manage Routes</h2>
          <div class="small">Available routes and capacities</div>
        </div>
        <div class="searchbar">
          <input class="input" id="routeSearch" placeholder="Search routes..." />
          <button class="input" id="addRouteBtn">+ Add</button>
        </div>
      </div>

      <table class="styled-table" id="routesTable" aria-live="polite">
        <thead>
          <tr><th>Route Name</th><th>Description</th><th>Capacity</th><th></th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Bookings Section -->
    <section id="bookings" class="view hidden">
      <div class="topbar">
        <div>
          <h2 style="margin:0">Bookings</h2>
          <div class="small">Your recent bookings</div>
        </div>
        <div class="searchbar">
          <input class="input" id="bookingSearch" placeholder="Search bookings..." />
          <button class="input" id="newBookingBtn">+ New</button>
        </div>
      </div>

      <h3>Current Bookings</h3>
      <ul id="bookingList" class="list-box" aria-live="polite"></ul>
    </section>
  </main>
</div>

<script>
/* Single-file SPA behavior + data */
(function(){
  // Simple in-memory data
  const routes = [
    { id:1, name: "Kabale – Kikungiri", desc: "Main route", cap: 60 },
    { id:2, name: "Kabale – Rukiga", desc: "Student line", cap: 40 },
    { id:3, name: "Kabale – Mbarara", desc: "Long route", cap: 50 }
  ];
  const bookings = [
    { id:1002, text: "Kabale to Kikungiri", routeId:1 },
    { id:1005, text: "Kabale to Rukiga", routeId:2 }
  ];

  // Helpers
  function $(sel, root=document) { return root.querySelector(sel) }
  function $all(sel, root=document) { return Array.from(root.querySelectorAll(sel)) }

  // Views
  const views = $all('.view');
  function showView(name){
    views.forEach(v => v.id === name ? v.classList.remove('hidden') : v.classList.add('hidden'));
    // update nav active states
    $all('[data-link]').forEach(a => {
      if(a.getAttribute('data-link') === name) a.classList.add('active'); else a.classList.remove('active');
    });
    // update header links
    $all('.navlinks a').forEach(a => {
      if(a.getAttribute('data-link') === name) a.classList.add('active'); else a.classList.remove('active');
    });
  }

  // Initial render
  function renderRoutes(filter=""){
    const tbody = $('#routesTable tbody');
    tbody.innerHTML = '';
    routes.filter(r => r.name.toLowerCase().includes(filter.toLowerCase()) || r.desc.toLowerCase().includes(filter.toLowerCase()))
      .forEach(r => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${r.name}</td><td>${r.desc}</td><td>${r.cap}</td>
          <td style="text-align:right">
            <button data-id="${r.id}" class="editBtn">Edit</button>
            <button data-id="${r.id}" class="delBtn">Delete</button>
          </td>`;
        tbody.appendChild(tr);
      });
  }

  function renderBookings(filter=""){
    const ul = $('#bookingList');
    ul.innerHTML = '';
    bookings.filter(b => b.text.toLowerCase().includes(filter.toLowerCase()))
      .forEach(b => {
        const li = document.createElement('li');
        const route = routes.find(r => r.id === b.routeId);
        li.innerHTML = `<div>
            <strong>Booking #${b.id}</strong><div class="small">${b.text}${route? ' — ' + route.name : ''}</div>
          </div>
          <div>
            <button data-id="${b.id}" class="cancelBtn">Cancel</button>
          </div>`;
        ul.appendChild(li);
      });
  }

  // Wire nav links
  $all('[data-link]').forEach(a => {
    a.addEventListener('click', e => {
      e.preventDefault();
      const name = a.getAttribute('data-link');
      showView(name);
      if(name === 'routes') renderRoutes();
      if(name === 'bookings') renderBookings();
    });
  });

  // Logout acts as redirect to index (which in original setup goes to dashboard)
  $('#goIndex').addEventListener('click', function(e){
    e.preventDefault();
    alert('You have been logged out (demo). Returning to home.');
    showView('dashboard');
  });

  // Search handlers
  $('#routeSearch').addEventListener('input', function(e){
    renderRoutes(e.target.value);
  });
  $('#bookingSearch').addEventListener('input', function(e){
    renderBookings(e.target.value);
  });

  // Add route
  $('#addRouteBtn').addEventListener('click', function(e){
    e.preventDefault();
    const name = prompt('Route name:');
    if(!name) return;
    const desc = prompt('Short description:') || '';
    const cap = parseInt(prompt('Capacity:'),'10') || 0;
    const id = routes.length ? Math.max(...routes.map(r=>r.id))+1 : 1;
    routes.push({id,name,desc,cap});
    renderRoutes();
    alert('Route added.');
  });

  // New booking
  $('#newBookingBtn').addEventListener('click', function(e){
    e.preventDefault();
    const text = prompt('Booking description (e.g. Kabale to Kikungiri):');
    if(!text) return;
    const routeName = prompt('Route name for this booking (must match existing route name):');
    let route = routes.find(r=>r.name.toLowerCase()=== (routeName||'').toLowerCase());
    if(!route){
      if(confirm('Route not found. Create it now?')){
        const id = routes.length ? Math.max(...routes.map(r=>r.id))+1 : 1;
        route = {id, name: routeName || text, desc:'', cap:40};
        routes.push(route);
      } else {
        route = null;
      }
    }
    const id = bookings.length ? Math.max(...bookings.map(b=>b.id))+1 : 1000;
    bookings.push({id, text, routeId: route? route.id : null});
    renderBookings();
    alert('Booking created.');
  });

  // Delegated actions (edit/delete/cancel)
  document.body.addEventListener('click', function(e){
    const t = e.target;
    if(t.matches('.delBtn')){
      const id = parseInt(t.getAttribute('data-id'));
      const idx = routes.findIndex(r=>r.id===id);
      if(idx>-1 && confirm('Delete this route?')){ routes.splice(idx,1); renderRoutes(); }
    } else if(t.matches('.editBtn')){
      const id = parseInt(t.getAttribute('data-id'));
      const r = routes.find(r=>r.id===id);
      if(r){
        const name = prompt('Route name:', r.name);
        if(name) r.name = name;
        const desc = prompt('Description:', r.desc);
        if(desc!==null) r.desc = desc;
        const cap = parseInt(prompt('Capacity:', r.cap),10);
        if(!isNaN(cap)) r.cap = cap;
        renderRoutes();
      }
    } else if(t.matches('.cancelBtn')){
      const id = parseInt(t.getAttribute('data-id'));
      const idx = bookings.findIndex(b=>b.id===id);
      if(idx>-1 && confirm('Cancel this booking?')){ bookings.splice(idx,1); renderBookings(); }
    }
  });

  // keyboard: press 1/2/3 to quick switch
  document.addEventListener('keydown', function(e){
    if(e.key==='1') { showView('dashboard') }
    if(e.key==='2') { showView('routes'); renderRoutes(); }
    if(e.key==='3') { showView('bookings'); renderBookings(); }
  });

  // initial
  showView('dashboard');
  renderRoutes();
  renderBookings();

})();
</script>

</body>
</html>
